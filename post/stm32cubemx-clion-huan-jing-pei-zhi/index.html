<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>STM32CubeMX + Clion ç¯å¢ƒé…ç½® | z</title>
<link rel="shortcut icon" href="https://anybive.github.io//favicon.ico?v=1694854543117">
<link href="https://cdn.jsdelivr.net/npm/remixicon@2.3.0/fonts/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://anybive.github.io//styles/main.css">
<link rel="alternate" type="application/atom+xml" title="STM32CubeMX + Clion ç¯å¢ƒé…ç½® | z - Atom Feed" href="https://anybive.github.io//atom.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">



    <meta name="description" content="éƒ¨åˆ†é…ç½®è¿‡ç¨‹å‚è€ƒå¤§ä½¬ ç¨šæ™–å› çš„å¸–å­ï¼šhttps://zhuanlan.zhihu.com/p/145801160
åŸºäº scoop é…ç½®ç¯å¢ƒï¼ŒåŒ…æ‹¬ stm32cubemx clion gcc-arm-none-eabi openocd ç­‰..." />
    <meta name="keywords" content="" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
    <script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="https://anybive.github.io/">
  <img class="avatar" src="https://anybive.github.io//images/avatar.png?v=1694854543117" alt="">
  </a>
  <h1 class="site-title">
    z
  </h1>
  <p class="site-description">
    
  </p>
  <div class="menu-container">
    
      
        <a href="/" class="menu">
          é¦–é¡µ
        </a>
      
    
      
        <a href="/archives" class="menu">
          å½’æ¡£
        </a>
      
    
      
        <a href="/tags" class="menu">
          æ ‡ç­¾
        </a>
      
    
      
        <a href="/post/about" class="menu">
          å…³äº
        </a>
      
    
  </div>
  <div class="social-container">
    
      
    
      
    
      
    
      
    
      
    
  </div>
</div>

        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              STM32CubeMX + Clion ç¯å¢ƒé…ç½®
            </h2>
            <div class="post-info">
              <span>
                2023-09-16
              </span>
              <span>
                4 min read
              </span>
              
            </div>
            
            <div class="post-content-wrapper">
              <div class="post-content">
                <p>éƒ¨åˆ†é…ç½®è¿‡ç¨‹å‚è€ƒå¤§ä½¬ <strong>ç¨šæ™–å›</strong> çš„å¸–å­ï¼šhttps://zhuanlan.zhihu.com/p/145801160<br>
åŸºäº scoop é…ç½®ç¯å¢ƒï¼ŒåŒ…æ‹¬ stm32cubemx clion gcc-arm-none-eabi openocd ç­‰ï¼Œä¹Ÿå¯æ‰‹åŠ¨éƒ¨ç½²ï¼Œéœ€è¦é…ç½®ç›¸å…³ç¯å¢ƒå˜é‡</p>
<!-- more -->
<h1 id="0-ç¯å¢ƒç®€ä»‹">0. ç¯å¢ƒç®€ä»‹</h1>
<p>æœ¬æ–‡åŸºäº scoop é…ç½®ç›¸å…³è¿è¡Œç¯å¢ƒï¼Œéœ€è¦çš„è½¯ä»¶åŒ…åŒ…æ‹¬ï¼š</p>
<ol>
<li>stm32cubemx : https://www.st.com/zh/development-tools/stm32cubemx.html</li>
<li>clion : https://www.jetbrains.com/clion/</li>
<li>gcc-arm-none-eabi : https://developer.arm.com/downloads/-/gnu-rm</li>
<li>openocd : https://openocd.org/</li>
</ol>
<p>æ‰‹åŠ¨éƒ¨ç½²éœ€è¦ä¸‹è½½ä»¥ä¸Šè½¯ä»¶åŒ…ï¼Œå¹¶é…ç½®ç›¸å…³ç¯å¢ƒå˜é‡</p>
<h1 id="1-é…ç½®-scoop">1. é…ç½® scoop</h1>
<p>scoop çš„å®˜æ–¹åœ°å€ : https://scoop.sh/<br>
é¦–å…ˆæ‰“å¼€ powershell ï¼Œæ‰§è¡Œä¸‹åˆ—è¯­å¥ä»¥å…è®¸è„šæœ¬æ‰§è¡Œ ï¼š<code>Set-ExecutionPolicy RemoteSigned -Scope CurrentUser</code><br>
åœ¨é»˜è®¤ä½ç½®å®‰è£…åªéœ€è¦æ‰§è¡Œ : <code>irm get.scoop.sh | iex</code><br>
è‹¥è¦åœ¨æŒ‡å®š path å®‰è£…ï¼Œåˆ™å…ˆæ‰§è¡Œè„šæœ¬ä¸‹è½½ :  <code>irm get.scoop.sh -outfile 'install.ps1'</code><br>
è€Œåè¿è¡Œè„šæœ¬å¹¶é€šè¿‡ -ScoopDir å‚æ•°æŒ‡å®šå®‰è£…è·¯å¾„ : <code>.\install.ps1 -ScoopDir 'path_to_your_dir'</code><br>
scoop çš„å­˜å‚¨åº“å‡ä½¿ç”¨ git ä» GitHub æ‹‰å–ï¼Œåœ¨è®¾ç½®å¥½ scoop åï¼Œè¯·æ‰§è¡Œä»¥ä¸‹æŒ‡ä»¤ï¼š</p>
<pre><code># å®‰è£…git
scoop install git
# å®‰è£…aria2åŠ é€Ÿä¸‹è½½
scoop install aria2
# æ·»åŠ extrasä»“åº“
scoop buckets add extras  
scoop install clion
scoop install gcc-arm-none-eabi
scoop install openocd
</code></pre>
<h1 id="2-é…ç½®-clion">2. é…ç½® clion</h1>
<p>é…ç½® clion å‰éœ€è¦å®‰è£… stm32cubemxï¼Œå®‰è£…æ—¶è·¯å¾„ä¸­è¯·å‹¿å«æœ‰ä¸­æ–‡æˆ–ç©ºæ ¼<br>
å®‰è£…å¥½åæ‰“å¼€ clionï¼Œåœ¨é¦–é¡µ-Pluginsä¸‹å¯ä»¥æœç´¢å®‰è£… Chinese Language Pack å®ç°æ±‰åŒ–<br>
é€‰æ‹©æ–°å»ºé¡¹ç›®ï¼Œåœ¨å·¦ä¾§è¾¹æ é€‰æ‹© STM32CubeMXï¼Œæ­¤æ—¶éœ€è¦åœ¨å³ä¾§æŒ‡å®šé¡¹ç›®çš„ä½ç½®ï¼š<br>
<img src="https://anybive.github.io//post-images/1694836291774.png" alt="" loading="lazy"><br>
ç‚¹å‡»ä¿®æ­£ä¼šè·³è½¬åˆ°è®¾ç½®é¡µé¢ï¼Œä½¿ç”¨ scoop å®‰è£…çš„è½¯ä»¶è·¯å¾„å‡ä¸º scoop å®‰è£…è·¯å¾„ä¸‹çš„appsç›®å½•ä¸‹ï¼š<br>
<img src="https://anybive.github.io//post-images/1694836362301.png" alt="" loading="lazy"><br>
éœ€è¦æ³¨æ„ openocd çš„å¯æ‰§è¡Œæ–‡ä»¶åœ¨ bin ç›®å½•ä¸‹<br>
ä¿®æ”¹å®Œæˆç‚¹å‡»åº”ç”¨ï¼Œç„¶ååœ¨å·¦ä¾§é€‰æ‹©å·¥å…·é“¾ï¼Œç‚¹å‡»åŠ å·ï¼ŒæŒ‰ä¸‹å›¾è®¾ç½®ï¼š<br>
<img src="https://anybive.github.io//post-images/1694836673409.png" alt="" loading="lazy"><br>
è®¾ç½®å®Œæˆåç‚¹å‡»ç¡®å®šï¼Œå¹¶é€‰æ‹©é¡¹ç›®ä½ç½®ï¼Œç‚¹å‡»åˆ›å»ºï¼Œä¼šè¿›å…¥é¡¹ç›®ç•Œé¢ã€‚<br>
Clionä¼šé¦–å…ˆè¿è¡Œ STM32CubeMX ç”Ÿæˆé»˜è®¤å¿…è¦æ–‡ä»¶ï¼Œè‹¥ç”Ÿæˆæ—¶ STM32CubeMX å¯åŠ¨è¾ƒæ…¢ï¼Œå¯èƒ½æ˜¯åœ¨ä¸‹è½½HALåº“æ–‡ä»¶ã€‚æ¨èå…ˆæ‰“å¼€ STM32CubeMX è¿›è¡Œåº“æ–‡ä»¶çš„ä¸‹è½½</p>
<h1 id="3-æ–°å»ºé¡¹ç›®">3. æ–°å»ºé¡¹ç›®</h1>
<p>é€‰æ‹©é¡¹ç›®ä½ç½®åˆ›å»ºå¹¶æ‰“å¼€é¡¹ç›®åï¼Œä¼šè‡ªåŠ¨è¿è¡Œ  STM32CubeMX ç”Ÿæˆéƒ¨åˆ†å¿…è¦æ–‡ä»¶ï¼Œé»˜è®¤é€‰æ‹©çš„é…ç½®æ–‡ä»¶ä¸º STM32F0 å‹å·ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹å¹¶ä¸ç¬¦åˆé…ç½®è¦æ±‚ï¼Œä¸‹é¢è¿›è¡Œä¿®æ”¹</p>
<ol>
<li>é¡¹ç›®ç”Ÿæˆç»“æŸåä¼šè¦æ±‚é€‰æ‹©é¢æ¿é…ç½®æ–‡ä»¶ï¼Œæ­¤æ—¶é€‰æ‹©è·³è¿‡å³å¯ã€‚</li>
<li>åœ¨å·¦ä¾§å¯¼èˆªçª—æ ¼ä¸­æ‰¾åˆ° <code>é¡¹ç›®å.ioc</code> æ–‡ä»¶ï¼Œå¹¶é€‰æ‹©é€šè¿‡ STM32CubeMX æ‰“å¼€ï¼Œæ­¤æ—¶ä¼šæ‰“å¼€æ–°çš„ STM32CubeMX ç•Œé¢ï¼Œå…ˆç‚¹å‡»ç•Œé¢ä¸Šçš„ STM32F030F4PXï¼Œç„¶åé€‰æ‹©èŠ¯ç‰‡çš„æ­£ç¡®å‹å·å¹¶è¿›è¡Œå…¶ä»–é…ç½®</li>
<li>é…ç½®ç»“æŸååœ¨ Project Manager ç•Œé¢å¡«å†™ Project Nameï¼ˆå’ŒClionçš„é¡¹ç›®åç›¸åŒï¼‰ï¼ŒToolchain/IDE éƒ¨åˆ†é€‰æ‹© STM32CubeIDEï¼Œè®¾ç½®å®Œæˆåç‚¹å‡»å³ä¸Šè§’çš„ GENERATE CODE ç”Ÿæˆä»£ç </li>
<li>è‹¥è·³å‡º overwrite çš„ warningï¼Œé€‰æ‹© Yes å³å¯</li>
</ol>
<p>æˆåŠŸç”Ÿæˆä»£ç åï¼ŒClion ä¼šè‡ªåŠ¨æ£€æµ‹å¹¶æ›´æ–°èŠ¯ç‰‡å‹å·ï¼Œæ­¤æ—¶å¯ä»¥åœ¨ç›¸åº”ç›®å½•ä¸‹ç¼–å†™ä»£ç ï¼Œå¹¶å¯ç‚¹å‡»å³ä¸Šè§’ğŸ”¨å›¾æ ‡æ¥ç¼–è¯‘ç›®æ ‡æ–‡ä»¶</p>
<h1 id="4-ä¸‹è½½ä¸è°ƒè¯•">4. ä¸‹è½½ä¸è°ƒè¯•</h1>
<p>ä»£ç ç¼–å†™å®Œæˆåï¼Œç‚¹å‡»å³ä¸Šè§’çš„ <code>é¡¹ç›®å.elf</code>ï¼Œé€‰æ‹©ç¼–è¾‘é…ç½®ï¼š<br>
<img src="https://anybive.github.io//post-images/1694841473655.png" alt="" loading="lazy"><br>
åœ¨ç¬¬å››æ­¥ä¸­éœ€è¦é€‰æ‹© openocd çš„é…ç½®æ–‡ä»¶ï¼Œåœ¨åˆé€‚çš„ç›®å½•ä¸‹æ–°å»ºé…ç½®æ–‡ä»¶ï¼Œåç§°ä»»æ„ï¼š<code>name.cfg</code><br>
ä»¥ daplink å’Œ stm32f411 ä¸¾ä¾‹ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code># choose st-link/j-link/dap-link etc.
adapter driver cmsis-dap 
transport select swd
â€‹
# 0x10000 = 64K Flash Size
set FLASH_SIZE 0x80000
â€‹
source [find target/stm32f4x.cfg]
â€‹
# download speed = 10MHz
adapter speed 10000
</code></pre>
<p>sourceéƒ¨åˆ†è¡¨ç¤ºåŸºäºå“ªä¸ªèŠ¯ç‰‡çš„é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥ä» <code>openocd\current\share\openocd\scripts\target</code> ç›®å½•ä¸‹æŸ¥çœ‹æ‰€æœ‰çš„èŠ¯ç‰‡é…ç½®æ–‡ä»¶å¹¶ä¿®æ”¹ç›¸åº”éƒ¨åˆ†<br>
ä¿®æ”¹å®Œæˆå¹¶ä¿å­˜åå³å¯ä¸‹è½½è¿è¡Œæˆ–å¼€å¯è°ƒè¯•æ¨¡å¼</p>

              </div>
              <div class="toc-container">
                <ul class="markdownIt-TOC">
<li><a href="#0-%E7%8E%AF%E5%A2%83%E7%AE%80%E4%BB%8B">0. ç¯å¢ƒç®€ä»‹</a></li>
<li><a href="#1-%E9%85%8D%E7%BD%AE-scoop">1. é…ç½® scoop</a></li>
<li><a href="#2-%E9%85%8D%E7%BD%AE-clion">2. é…ç½® clion</a></li>
<li><a href="#3-%E6%96%B0%E5%BB%BA%E9%A1%B9%E7%9B%AE">3. æ–°å»ºé¡¹ç›®</a></li>
<li><a href="#4-%E4%B8%8B%E8%BD%BD%E4%B8%8E%E8%B0%83%E8%AF%95">4. ä¸‹è½½ä¸è°ƒè¯•</a></li>
</ul>

              </div>
            </div>
          </article>
        </div>

        
          <div class="next-post">
            <div class="next">ä¸‹ä¸€ç¯‡</div>
            <a href="https://anybive.github.io/post/hello-gridea/">
              <h3 class="post-title">
                Hello Gridea
              </h3>
            </a>
          </div>
        

        

        <div class="site-footer">
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
  <a class="rss" href="https://anybive.github.io//atom.xml" target="_blank">
    <i class="ri-rss-line"></i> RSS
  </a>
</div>

      </div>
    </div>

    <script>
      hljs.initHighlightingOnLoad()

      let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

      // This should probably be throttled.
      // Especially because it triggers during smooth scrolling.
      // https://lodash.com/docs/4.17.10#throttle
      // You could do like...
      // window.addEventListener("scroll", () => {
      //    _.throttle(doThatStuff, 100);
      // });
      // Only not doing it here to keep this Pen dependency-free.

      window.addEventListener("scroll", event => {
        let fromTop = window.scrollY;

        mainNavLinks.forEach((link, index) => {
          let section = document.getElementById(decodeURI(link.hash).substring(1));
          let nextSection = null
          if (mainNavLinks[index + 1]) {
            nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
          }
          if (section.offsetTop <= fromTop) {
            if (nextSection) {
              if (nextSection.offsetTop > fromTop) {
                link.classList.add("current");
              } else {
                link.classList.remove("current");    
              }
            } else {
              link.classList.add("current");
            }
          } else {
            link.classList.remove("current");
          }
        });
      });

    </script>
  </body>
</html>
